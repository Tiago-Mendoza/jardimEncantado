<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho - Jardim Encantado</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body{font-family:'Lato',sans-serif;background:#f7f7f7;margin:0;padding:0;}
        .container{max-width:1100px;margin:40px auto;padding:0 20px;}
        h1{text-align:center;margin-bottom:30px;}
        .cart-table{width:100%;border-collapse:collapse;margin-bottom:30px;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 6px rgba(0,0,0,.1);}        
        .cart-table th,.cart-table td{padding:14px;border-bottom:1px solid #eee;text-align:left;}
        .cart-table th{background:#fafafa;font-weight:700;}
        .cart-table img{width:60px;border-radius:4px;}
        .remove-btn{background:none;border:none;color:#d93025;font-size:18px;cursor:pointer;}
        .total{font-size:20px;font-weight:700;text-align:right;margin-bottom:20px;}
        .payment-section{background:#fff;padding:24px;border-radius:8px;box-shadow:0 1px 6px rgba(0,0,0,.1);}
        .payment-section h2{margin-top:0;}
        .payment-section label{display:block;margin-bottom:6px;font-weight:700;}
        .payment-section input,.payment-section select{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:16px;}
        .payment-section button{width:100%;padding:12px;background:#4CAF50;color:#fff;border:none;border-radius:4px;font-size:16px;cursor:pointer}
    </style>
</head>
<body>
    <div class="container">
        <h1>Seu Carrinho</h1>
        <table class="cart-table" id="cart-table">
            <thead><tr><th></th><th>Produto</th><th>Preço</th><th></th></tr></thead>
            <tbody></tbody>
        </table>
        <div class="total" id="cart-total">Total: R$ 0,00</div>
        <div class="payment-section">
            <h2>Pagamento</h2>
            <form id="payment-form">
                <label for="method">Método de Pagamento</label>
                <select id="method" required>
                    <option value="credito">Cartão de Crédito</option>
                    <option value="pix">PIX</option>
                    <option value="boleto">Boleto</option>
                </select>
                <label for="name">Nome Completo</label>
                <input type="text" id="name" required>
                <label for="email">E-mail</label>
                <input type="email" id="email" required>
                <button type="submit">Finalizar Compra</button>
            </form>
        </div>
    </div>
<script>
function loadCart(){try{return JSON.parse(localStorage.getItem('cartItems'))||[]}catch(_){return []}}
function saveCart(arr){localStorage.setItem('cartItems',JSON.stringify(arr))}
function formatCurrency(v){return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'})}
function renderCart(){
    const tbody=document.querySelector('#cart-table tbody');
    tbody.innerHTML='';
    const cart=loadCart();
    let total=0;
    cart.forEach((p,idx)=>{
        total+=p.price||p.oldPrice;
        const tr=document.createElement('tr');
        tr.innerHTML=`<td><img src="${p.image}" alt="${p.title}" onerror="this.onerror=null;this.src='https://via.placeholder.com/60x40'"></td><td>${p.title}</td><td>${formatCurrency(p.price||p.oldPrice)}</td><td><button class='remove-btn' data-idx='${idx}'>&times;</button></td>`;
        tbody.appendChild(tr);
    });
    document.getElementById('cart-total').textContent='Total: '+formatCurrency(total);
}
renderCart();

document.addEventListener('click',function(e){
    if(e.target.matches('.remove-btn')){
        const idx=parseInt(e.target.getAttribute('data-idx'));
        const cart=loadCart();
        cart.splice(idx,1);
        saveCart(cart);
        renderCart();
    }
});

document.getElementById('payment-form').addEventListener('submit',function(e){
    e.preventDefault();
    alert('Compra concluída! (Fluxo de pagamento simulado)');
    localStorage.removeItem('cartItems');
    renderCart();
});
</script>
</body>
</html>
